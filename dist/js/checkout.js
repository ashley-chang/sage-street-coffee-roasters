const stripe=Stripe("pk_test_xUP6oxz6ucEkctXm5Z1Qct0m"),elements=stripe.elements(),billingAddressSame=document.querySelector("input[name='billing_address_same']"),billingAddressInputs=document.querySelectorAll(".checkout-form__billing-address input");billingAddressSame.onclick=function(){if(this.checked)for(let e=0;e<billingAddressInputs.length;e++)billingAddressInputs[e].disabled=!0,billingAddressInputs[e].required=!1;else for(let e=0;e<billingAddressInputs.length;e++)billingAddressInputs[e].disabled=!1,billingAddressInputs[e].required=!0};const inputs=document.getElementsByTagName("input"),errorMessage=document.getElementById("error-message");for(let e=0;e<inputs.length;e++)inputs[e].oninvalid=function(e){e.target.setCustomValidity(""),e.target.validity.valid||(errorMessage.textContent="Please fill out the required fields.",e.target.setCustomValidity("This field cannot be left blank"),e.target.classList.add("required"))},inputs[e].oninput=function(e){e.target.setCustomValidity("")};const style={base:{fontFamily:"system-ui"}},card=elements.create("card",{style:style});card.mount("#card-element"),card.addEventListener("change",({error:e})=>{const t=document.getElementById("card-errors");t.textContent=e?e.message:""});const checkoutForm=document.getElementById("checkout-form");checkoutForm.addEventListener("submit",async e=>{e.preventDefault();const{token:t,error:n}=await stripe.createToken(card);if(n){document.getElementById("card-errors").textContent=n.message,document.getElementById("error-message").textContent=n.message}else stripeTokenHandler(t)});const stripeTokenHandler=e=>{const t=document.getElementById("checkout-form"),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","stripeToken"),n.setAttribute("value",e.id),t.appendChild(n),t.submit()};